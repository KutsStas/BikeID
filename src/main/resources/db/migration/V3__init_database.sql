create TABLE bikes (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   bike_brand VARCHAR(255),
   bike_color VARCHAR(255),
   bike_model VARCHAR(255),
   bike_type VARCHAR(255),
   frame_number VARCHAR(255),
   frame_size INTEGER,
   legal_status VARCHAR(255),
   warranty INTEGER,
   wheel_size INTEGER,
   technical_passport_id INTEGER,
   user_id INTEGER NOT NULL,
   CONSTRAINT bikes_pkey PRIMARY KEY (id)
);

create TABLE technical_passports (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   bike_name VARCHAR(255),
   client_name VARCHAR(255),
   replacement_parts VARCHAR(255),
   service_men_comments VARCHAR(255),
   service_work VARCHAR(255),
   servicemen_name VARCHAR(255),
   technical_status VARCHAR(255),
   visit_date date,
   warranty_work BOOLEAN,
   work_prise INTEGER,
   work_shop VARCHAR(255),
   bike_id INTEGER,
   CONSTRAINT technical_passports_pkey PRIMARY KEY (id)
);

create TABLE users (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   email VARCHAR(255),
   enable BOOLEAN NOT NULL,
   expiration_date date,
   name VARCHAR(255),
   password VARCHAR(255),
   phone_number VARCHAR(255),
   role VARCHAR(255),
   surname VARCHAR(255),
   username VARCHAR(255),
   CONSTRAINT users_pkey PRIMARY KEY (id)
);

create TABLE workshops (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   address VARCHAR(255),
   sales_date date,
   website VARCHAR(255),
   workshop_name VARCHAR(255),
   workshop_phone_number INTEGER,
   workshop_rating INTEGER,
   workshop_reviews VARCHAR(255),
   user_id INTEGER NOT NULL,
   CONSTRAINT workshops_pkey PRIMARY KEY (id)
);

alter table users add CONSTRAINT ui_user_email UNIQUE (email);

create TABLE bikes_workshop (
  workshop_id INTEGER NOT NULL,
   bike_id INTEGER NOT NULL
);

create TABLE technical_passport_workshop (
  workshop_id INTEGER NOT NULL,
   technical_passport_id INTEGER NOT NULL
);

create TABLE user_granted_authorities_list (
  user_id INTEGER NOT NULL,
   granted_authorities_list BYTEA
);

alter table bikes_workshop add CONSTRAINT fk310o4djoaorb9r2l61rf4tgv2 FOREIGN KEY (bike_id) REFERENCES bikes (id) ON update NO ACTION ON delete NO ACTION;

alter table technical_passport_workshop add CONSTRAINT fk4ystx179gcrq8oxd3gu9cq3o FOREIGN KEY (technical_passport_id) REFERENCES technical_passports (id) ON update NO ACTION ON delete NO ACTION;

alter table technical_passports add CONSTRAINT fk5nqtcumyuai4f0ea9o32rbxvd FOREIGN KEY (bike_id) REFERENCES bikes (id) ON update NO ACTION ON delete NO ACTION;

alter table technical_passport_workshop add CONSTRAINT fk9kc7gth4p2s0o7sc8n4j1rom7 FOREIGN KEY (workshop_id) REFERENCES workshops (id) ON update NO ACTION ON delete NO ACTION;

alter table workshops add CONSTRAINT fkgkw4s47asgmpb2j5vxexfcydi FOREIGN KEY (user_id) REFERENCES users (id) ON update NO ACTION ON delete NO ACTION;

alter table bikes add CONSTRAINT fkk611h7nerl9nmcychdp2wf9j2 FOREIGN KEY (technical_passport_id) REFERENCES technical_passports (id) ON update NO ACTION ON delete NO ACTION;

alter table bikes_workshop add CONSTRAINT fkna5fjwnkctvy8s13wo65uximh FOREIGN KEY (workshop_id) REFERENCES workshops (id) ON update NO ACTION ON delete NO ACTION;

alter table bikes add CONSTRAINT fkq0rm6jqwxyp67riq1gmkyuo3r FOREIGN KEY (user_id) REFERENCES users (id) ON update NO ACTION ON delete NO ACTION;